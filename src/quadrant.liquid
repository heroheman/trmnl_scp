<div class="layout layout--col gap">
  {% assign scp = data %}
  
  {% comment %} Extract Object Class from tags {% endcomment %}
  {% assign object_class_extracted = "" %}
  {% assign known_classes = "safe,euclid,keter,thaumiel,apollyon,neutralized,decommissioned,pending,explained" | split: "," %}
  {% for tag in scp.tags %}
    {% if known_classes contains tag %}
      {% assign object_class_extracted = tag %}
      {% break %}
    {% endif %}
  {% endfor %}
  {% if object_class_extracted == "" %}
    {% for tag in scp.tags %}
      {% if tag contains "esoteric-class" %}
        {% assign object_class_extracted = "Esoteric" %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}
  
  {% comment %} Extract Special Containment Procedures {% endcomment %}
  {% assign procedures_extracted = "" %}
  {% if scp.raw_content contains "<strong>Special Containment Procedures:</strong>" %}
    {% assign after_procedures = scp.raw_content | split: "<strong>Special Containment Procedures:</strong>" | last %}
    {% if after_procedures contains "<strong>Description:</strong>" %}
      {% assign procedures_extracted = after_procedures | split: "<strong>Description:</strong>" | first | strip_html | strip %}
    {% elsif after_procedures contains "<strong>Description</strong>" %}
      {% assign procedures_extracted = after_procedures | split: "<strong>Description</strong>" | first | strip_html | strip %}
    {% endif %}
  {% endif %}
  
  {% comment %} Extract Description {% endcomment %}
  {% assign description_extracted = "" %}
  {% if scp.raw_content contains "<strong>Description:</strong>" %}
    {% assign after_description = scp.raw_content | split: "<strong>Description:</strong>" | last | strip_html | strip %}
    {% assign description_extracted = after_description %}
  {% endif %}
  
  <div class="content">
    {% render 'scp_item_no_image',
      title: scp.scp,
      title_size: 'title--medium',
      title_clamp: '1',
      object_class: object_class_extracted,
      show_procedures: trmnl.plugin_settings.custom_fields_values.show_procedures,
      procedures: procedures_extracted,
      description: description_extracted
    %}
  </div>
</div>

{% render 'scp_footer', 
  scp_number: scp.scp,
  min: trmnl.plugin_settings.custom_fields_values.min,
  max: trmnl.plugin_settings.custom_fields_values.max
%}

